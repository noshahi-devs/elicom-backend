<div class="product-listing-content">
    <div class="d-flex justify-content-between align-items-center mb-4 px-2">
        <div>
            <h2 class="fw-bold text-dark mb-1">Store Listings</h2>
            <p class="text-muted small mb-0">Manage and monitor your products with premium 3D visualization.</p>
        </div>
        <button routerLink="/seller/add-product" class="btn btn-primary rounded-pill px-4 shadow-sm">
            <i class="fas fa-plus me-2"></i>Add New Product
        </button>
    </div>

    <!-- Filters Row -->
    <div class="card border-0 shadow-sm mb-5 mx-2 bg-white rounded-4">
        <div class="card-body d-flex gap-3 align-items-center flex-wrap p-3">
            <div class="search-box flex-grow-1" style="position: relative;">
                <i class="fas fa-search"
                    style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #94a3b8;"></i>
                <input type="text" class="form-control ps-5 border-0 bg-light rounded-3" [(ngModel)]="filterText"
                    placeholder="Search by name, SKU or brand..." style="height: 45px;">
            </div>
            <select class="form-select w-auto border-0 bg-light rounded-3 shadow-none" style="height: 45px;">
                <option>All Categories</option>
            </select>
            <select class="form-select w-auto border-0 bg-light rounded-3 shadow-none" style="height: 45px;">
                <option>Price: Default</option>
                <option>Low to High</option>
                <option>High to Low</option>
            </select>
        </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="isLoading" class="text-center py-5">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-3 text-muted fw-bold">Loading Your Listings...</p>
    </div>

    <!-- Empty State -->
    <div *ngIf="!isLoading && products.length === 0"
        class="text-center py-5 bg-white rounded-4 shadow-sm mx-2 animate__animated animate__fadeIn">
        <div class="mb-4">
            <i class="fas fa-box-open fa-5x text-light"></i>
        </div>
        <h4 class="fw-bold text-dark">No Products Found</h4>
        <p class="text-muted">You haven't mapped any products to your store yet.</p>
        <button routerLink="/seller/add-product" class="btn btn-primary rounded-pill px-4 mt-2">
            <i class="fas fa-search me-2"></i>Browse Wholesale Catalog
        </button>
    </div>

    <!-- Filtered Empty State -->
    <div *ngIf="!isLoading && products.length > 0 && filteredProducts.length === 0"
        class="text-center py-5 bg-white rounded-4 shadow-sm mx-2 animate__animated animate__fadeIn">
        <h4 class="fw-bold text-dark">No Matches Found</h4>
        <p class="text-muted">Try adjusting your search terms for "{{filterText}}"</p>
    </div>

    <!-- 3D Product Grid -->
    <div class="cards-grid-container" *ngIf="!isLoading && filteredProducts.length > 0">
        <div class="scene" *ngFor="let product of filteredProducts; let i = index"
            [style.animationDelay]="(i * 0.1) + 's'">
            <div class="card-3d" (click)="viewProduct(product)" style="cursor: pointer;">
                <div class="face">
                    <div class="image-container">
                        <img [src]="product.image" [alt]="product.title">
                    </div>
                    <div class="info-container">
                        <div class="title-box">
                            <div class="title">{{ product.title }}</div>
                            <div class="tooltip-text">{{ product.title }}</div>
                        </div>
                        <div class="tags">
                            <span class="tag">ID: {{ product.id.substring(0, 8) }}</span>
                            <span class="tag">{{ product.category }}</span>
                            <span class="tag">{{ product.brand }}</span>
                        </div>
                        <div class="bottom-row">
                            <div class="price">${{ product.price }}</div>
                            <div class="actions-btns">
                                <button class="heart" (click)="toggleActive($event, 'heart')">
                                    <i class="fas fa-heart"></i>
                                </button>
                                <button class="cart" (click)="toggleActive($event, 'cart')">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="side"></div>
            </div>
        </div>
    </div>

    <!-- Load More -->
    <div class="load-more-container" *ngIf="!isLoading && products.length > 0">
        <button class="load-more-btn">
            Load More Products
        </button>
    </div>
</div>