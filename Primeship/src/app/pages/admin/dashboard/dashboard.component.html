<div class="dashboard-container">
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">Admin Dashboard</h1>
    <p class="page-subtitle">Sourcing Platform Oversight - Real-time Performance Metrics</p>

    <!-- Azure Storage Management Section -->
    <div class="azure-test-section"
      style="margin-top: 20px; padding: 15px; background: rgba(255, 255, 255, 0.1); border-radius: 8px; border: 1px dashed rgba(255, 255, 255, 0.2);">
      <div style="display: flex; align-items: center; gap: 15px;">
        <input type="file" #testFileInput hidden (change)="onTestFileSelect($event)" [disabled]="isUploading">
        <button (click)="testFileInput.click()" [disabled]="isUploading"
          style="background: #f85606; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">
          {{ isUploading ? 'üöÄ Uploading...' : 'üìÅ Select & Upload' }}
        </button>
        <span *ngIf="isUploading" style="color: #f85606;">Processing...</span>
      </div>

      <div *ngIf="azureUploadError"
        style="margin-top: 15px; color: #ff4d4d; background: rgba(255, 77, 77, 0.1); padding: 10px; border-radius: 4px;">
        ‚ùå {{ azureUploadError }}
      </div>

      <div *ngIf="testImageUrl"
        style="margin-top: 15px; padding: 15px; background: rgba(76, 209, 55, 0.1); border-radius: 4px; border: 1px solid rgba(76, 209, 55, 0.2);">
        <p style="color: #4cd137; margin-bottom: 10px;">‚úÖ Uploaded Successfully!</p>
        <div style="display: flex; flex-direction: column; gap: 10px;">
          <input type="text" [value]="testImageUrl" readonly
            style="background: rgba(0,0,0,0.3); color: #fff; border: 1px solid rgba(255,255,255,0.1); padding: 5px 10px; border-radius: 4px; font-size: 12px; width: 100%;">

          <div style="display: flex; gap: 10px;">
            <a [href]="testImageUrl" target="_blank"
              style="background: #4cd137; color: #fff; padding: 5px 15px; border-radius: 4px; text-decoration: none; font-size: 14px; display: inline-block;">
              View Image ‚Üó
            </a>
            <button (click)="testImageUrl = ''"
              style="background: transparent; color: #aaa; border: 1px solid #555; padding: 5px 15px; border-radius: 4px; cursor: pointer;">
              Clear
            </button>
          </div>

          <div style="margin-top: 10px;">
            <img [src]="testImageUrl" alt="Test Preview"
              style="max-width: 100%; max-height: 200px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.1);">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Stats Cards Grid -->
  <div class="stats-grid">
    <div *ngFor="let card of statsCards" class="stat-card-3d orange-card">
      <div class="stat-card-content">
        <div class="stat-icon-wrapper">
          <span class="stat-icon">{{ card.icon }}</span>
        </div>

        <div class="stat-info">
          <h3 class="stat-value">{{ card.value }}</h3>
          <p class="stat-title">{{ card.title }}</p>
        </div>
      </div>
      <div class="stat-card-decoration"></div>
    </div>
  </div>

  <!-- Main Content Grid -->
  <div class="content-grid">
    <!-- Left Column -->
    <div class="left-column">
      <!-- Quick Actions -->
      <div class="card-3d quick-actions-card">
        <div class="card-header">
          <h3>Management Controls</h3>
        </div>
        <div class="card-content">
          <div class="actions-grid">
            <button class="action-card color-primary" (click)="onQuickAction('/admin/products')">
              <span class="action-icon">‚ûï</span>
              <span class="action-title">Manage Catalog</span>
            </button>
            <button class="action-card color-info" (click)="onQuickAction('/admin/orders')">
              <span class="action-icon">üìã</span>
              <span class="action-title">View All Orders</span>
            </button>
            <button class="action-card color-success" (click)="onQuickAction('/admin/sellers')">
              <span class="action-icon">üë•</span>
              <span class="action-title">Sellers List</span>
            </button>
            <button class="action-card" (click)="onQuickAction('/admin/customers')">
              <span class="action-icon">‚öôÔ∏è</span>
              <span class="action-title">User Management</span>
            </button>
          </div>
        </div>
      </div>

      <!-- Platform Health -->
      <div class="card-3d health-card">
        <div class="card-header">
          <h3><i class="pi pi-shield"></i> Platform Integrity</h3>
        </div>
        <div class="card-content">
          <div class="health-metrics">
            <div class="health-item">
              <span class="health-label">API Status</span>
              <span class="health-value text-success">Healthy</span>
            </div>
            <div class="health-item">
              <span class="health-label">Database</span>
              <span class="health-value text-success">Optimized</span>
            </div>
            <div class="health-item">
              <span class="health-label">Pending Settlements</span>
              <span class="health-value text-warning">4 Active</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column -->
    <div class="right-column">
      <!-- Recent Platform Orders -->
      <div class="card-3d recent-orders-card">
        <div class="card-header">
          <h3>Recent Activity</h3>
          <a (click)="onQuickAction('/admin/orders')" class="view-all-link">View all</a>
        </div>
        <div class="card-content">
          <div class="orders-list">
            <div class="order-item" *ngFor="let order of recentOrders">
              <div class="order-customer">
                <div class="customer-avatar-placeholder">
                  <i class="fas fa-user"></i>
                </div>
                <div class="customer-info">
                  <p class="customer-name">Seller ID: {{ order.sellerId }}</p>
                  <p class="order-id">{{ order.referenceCode || order.orderNo }}</p>
                </div>
              </div>
              <div class="order-details">
                <p class="order-amount">${{ (order.totalPurchaseAmount || 0).toFixed(2) }}</p>
              </div>
              <div class="order-status">
                <span class="status-badge" [class]="'status-' + getStatusColor(order.status)">
                  {{ getStatusLabel(order.status) }}
                </span>
              </div>
            </div>
            <div class="no-data" *ngIf="recentOrders.length === 0">
              <i class="pi pi-inbox"></i>
              <p>No recent platform activity</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>