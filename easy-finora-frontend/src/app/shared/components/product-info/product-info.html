<div class="product-info-column">
    <div class="right-box">

        <!-- Title & Share -->
        <div class="title-row">
            <div class="title">{{ product.title }}</div>
            <div class="share-container">
                <span class="share-icon">
                    <a href="#" class="share-btn"><i class="fa-solid fa-arrow-up-right-from-square"
                            style="color: #74C0FC;"></i></a>
                </span>
                <div class="share-popup">
                    <a href="https://twitter.com/intent/tweet?url=YOUR_PRODUCT_URL&text=Check%20out%20this%20product%21"
                        target="_blank" class="social-link">
                        <i class="fab fa-twitter social-icon-fa twitter"></i>
                    </a>
                    <a href="https://pinterest.com/pin/create/button/?url=YOUR_PRODUCT_URL&media=YOUR_IMAGE_URL&description=YOUR_PRODUCT_DESCRIPTION"
                        target="_blank" class="social-link">
                        <i class="fab fa-pinterest social-icon-fa pinterest"></i>
                    </a>
                    <a href="https://www.facebook.com/sharer/sharer.php?u=YOUR_PRODUCT_URL" target="_blank"
                        class="social-link">
                        <i class="fab fa-facebook-f social-icon-fa facebook"></i>
                    </a>
                </div>
            </div>
        </div>

        <!-- SKU & Rating -->
        <div class="sku">
            <span>SKU: {{ product.sku }}</span>
            <i class="fa-solid fa-clone"></i>
            <div class="rating">
                <span *ngFor="let r of [1,2,3,4,5]; let i = index"
                    [ngClass]="i < rating ? 'fa-solid fa-star' : 'fa-regular fa-star'"></span>
                <span class="review-count">({{ product.reviewCount }}+ Reviews)</span>
            </div>
        </div>

        <!-- Price -->
        <div class="price-container">
            <div class="price-now"><span>$</span>{{ product.priceNow }}</div>
            <div class="price-old-and-discount">
                <div class="price-old">${{ product.priceOld }}</div>
                <div class="discount-box">-{{ product.discount }}%</div>
            </div>
        </div>

        <!-- AD / OFFER SLOT -->
        <div class="ad-slot" *ngIf="adBanner; else productContent">
            <div class="klarna-box">
                <span class="klarna-text">
                    {{ adBanner.text }}
                    <span class="klarna-logo">{{ adBanner.brand }}</span>
                    <i class="fa-regular fa-circle-question"></i>
                </span>
            </div>
        </div>

        <!-- NORMAL PRODUCT CONTENT -->
        <ng-template #productContent>
            <div class="product-main-info"> 
                <h1>{{ product.title }}</h1>
                <p>{{ product.description }}</p>
                <!-- baki product info -->
            </div>
        </ng-template>


        <div class="section-title color-title">
            Color: {{ selectedColorName }}
            <span class="large-image-link">Large Image</span>
        </div>

        <div class="color-list">
            <div *ngFor="let color of colors" class="color-item" [ngClass]="{ 'active': color.active }"
                (click)="selectColor(color)">
                <img [src]="color.src" [alt]="color.name">
                <span *ngIf="color.hot" class="hot-tag">HOT</span>
            </div>
        </div>



        <!-- SIZE -->
        <div class="size-area">
            <!-- DROPDOWN -->
            <div class="size-text-type">
                <div class="size-label">Size</div>
                <div class="size-select">
                    <select [(ngModel)]="selectedSize">
                        <option value="">MX Size</option>
                        <option *ngFor="let s of sizes" [value]="s">{{ s }} Size</option>
                    </select>
                </div>
            </div>

            <!-- BUTTONS -->
            <div class="size-buttons">
                <button class="size-btn" *ngFor="let s of sizes" [class.selected]="selectedSize === s"
                    (click)="selectSize(s)">
                    {{ s }}
                </button>
            </div>
            <div class="size-helpers">
                <a href="#" title="Size Guide"><i class="fa-solid fa-ruler"></i> Size Guide</a>
                <a href="#" title="Check My Size"><i class="fa-solid fa-user-check"></i> Check My Size</a>
            </div>

            <a class="not-your-size"><span>Not your size</span>? <span>Tell me your size</span></a>
        </div>
    </div>


    <!-- Quantity -->
    <div class="quantity-selector">
        <div class="qty-title" style="margin: 0;">Qty:</div>
        <div class="qty-box">
            <button class="qty-btn" (click)="decrementQty()">-</button>
            <input type="text" class="qty-input" [value]="quantity" readonly>
            <button class="qty-btn" (click)="incrementQty()">+</button>
        </div>
    </div>

    <!-- Add to Cart & Favourite -->
    <div class="add-cart-section">
        <button class="add-cart" (click)="addToCart()">
            ADD TO CART
        </button>
        <button class="fav-btn" (click)="toggleFav()">
            <i [ngClass]="fav ? 'fa-solid fa-heart' : 'fa-regular fa-heart'" id="favIcon"></i>
        </button>
    </div>
    <div class="points">Earn up to <strong>11 Points</strong> calculated at checkout</div>
    <div class="ship-box">
        <!-- TITLE -->
        <div class="title-main">
            Shipping to <span>{{ shippingData.location }}</span>
        </div>

        <!-- FREE SHIPPING -->
        <div class="row-item">
            <!-- SVG SAME -->
            <svg style="width: 24px; height: 24px;" width="24" height="24" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <rect width="24" height="24" fill="white" fill-opacity="0.01"></rect>
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M17.4086 6.92012V4H3.01044V8.64506V14.2934V18.4515H4.76135C5.24011 16.7751 6.78359 15.5479 8.61371 15.5479C10.4438 15.5479 11.9873 16.7751 12.4661 18.4515H13.6171C14.0958 16.7751 15.6393 15.5479 17.4694 15.5479C19.2996 15.5479 20.8431 16.7752 21.3218 18.4517H22.5697V8.60743L17.4086 6.92012ZM17.4086 12.4516V9.02453L20.5692 10.0576V12.4516H17.4086Z"
                    fill="#198055"></path>
                <circle cx="17.5168" cy="19.554" r="2" fill="#198055"></circle>
                <circle cx="8.61353" cy="19.554" r="2" fill="#198055"></circle>
            </svg>

            <div>
                <div class="green-text" *ngIf="shippingData.shipping.free">
                    Free Shipping (Orders &gt; ${{ shippingData.shipping.minOrder }})
                </div>

                <div class="gray">
                    Estimated Delivery:
                    <span class="bold">
                        {{ shippingData.shipping.estimatedFrom }} -
                        {{ shippingData.shipping.estimatedTo }}
                    </span>
                </div>

                <div class="red-box">
                    {{ shippingData.shipping.onTimePercentage }}% arrive in ≤ 7 days
                </div>
            </div>
        </div>

        <!-- RETURN POLICY -->
        <div class="row-item">
            <!-- SVG SAME -->
            <svg style="width:24;height:24;" width="48" height="48" viewBox="0 0 48 48" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M22.7311 32.1047L15.3483 25.9523L22.7311 19.8L24.6517 22.1047L21.7772 24.5H32.5V31H29.5V27.5H21.8916L24.6517 29.8L22.7311 32.1047Z"
                    fill="#198055"></path>
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M44 7.99994V15.9999H41.5V41.4999H6.5V15.9999H4V7.99994H44ZM7 12.9999H41V10.9999H7V12.9999ZM9.5 15.9999V38.4999H38.5V15.9999H9.5Z"
                    fill="#198055"></path>
                <rect width="48" height="48" fill="white" fill-opacity="0.01"></rect>
            </svg>

            <div>
                <div class="green-text">Return Policy</div>
                <div class="gray normal" *ngIf="shippingData.returnPolicy.freeReturn">
                    Free Return
                </div>
            </div>
        </div>

        <!-- SECURITY -->
        <div class="row-item">
            <!-- SVG SAME -->
            <svg style="width:24;height:24;" width="24" height="24" viewBox="0 0 24 24" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M16.9718 9.77253L15.4476 8.4777L11.3724 13.274L8.17984 10.6854L6.92024 12.2389L11.6317 16.0589L16.9718 9.77253Z"
                    fill="#198055"></path>
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M21.6305 4.98486L11.9994 0.914062L2.41368 4.97874L2.38343 5.60605C2.27318 7.89188 2.34505 10.168 2.59902 12.434L2.65097 12.8847L2.75641 13.7228C2.7919 13.9882 2.82774 14.2395 2.86395 14.4768C3.12183 16.1674 3.98828 17.7055 5.30045 18.8021L5.65733 19.0978C8.07722 21.0858 10.0646 22.3651 11.6608 22.9407L12 23.063L12.3392 22.9407C14.0351 22.3292 16.1089 20.997 18.5953 18.9432C19.7483 17.9909 20.5667 16.6952 20.9314 15.2449L21.0539 14.7254C21.2154 13.9925 21.3392 13.2334 21.4288 12.434C21.6207 10.722 21.6961 8.64587 21.6565 6.20185L21.6305 4.98486ZM11.9994 3.08599L19.6574 6.32199L19.6636 6.76927C19.6834 8.90083 19.6089 10.7158 19.4413 12.2112C19.3593 12.9426 19.2468 13.6325 19.1039 14.281L18.9882 14.7718C18.7311 15.794 18.1459 16.7204 17.3217 17.4012L16.9762 17.684C15.0366 19.2565 13.4062 20.3228 12.106 20.8827L12.0014 20.925L11.9236 20.894C10.6338 20.3363 8.9601 19.2228 6.93017 17.5552L6.57978 17.2648C5.64489 16.4835 5.02544 15.3838 4.84108 14.1752L4.7553 13.5801L4.67045 12.9254L4.58657 12.2112L4.50393 11.4008C4.35491 9.77906 4.30354 8.15195 4.34983 6.51922L4.35637 6.32598L11.9994 3.08599Z"
                    fill="#198055"></path>
            </svg>

            <div>
                <div class="green-text">Shopping Security</div>
                <div>
                    <span class="security-pill" *ngIf="shippingData.security.safePayments">
                        ✔ Safe Payments
                    </span>
                    <span class="security-pill" *ngIf="shippingData.security.privacyProtection">
                        ✔ Privacy Protection
                    </span>
                </div>
            </div>
        </div>

        <!-- SELLER -->
        <div class="row-item">
            <!-- SVG SAME -->
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"
                style="width: 24px; height: 24px;">
                <path fill-rule="evenodd" clip-rule="evenodd"
                    d="M14.5 1.5H1.5V14.5H14.5V1.5ZM13.5 2.5H2.5V6.1L2.51171 6.18873C2.59911 6.88733 3.16423 7.42854 3.85935 7.49346L4 7.5C4.7583 7.5 5.39507 6.93391 5.48829 6.18873L5.54308 5.7508H6.45692L6.51171 6.18873C6.60493 6.93391 7.2417 7.5 8 7.5C8.7583 7.5 9.39507 6.93391 9.48829 6.18873L9.54308 5.7508H10.4569L10.5117 6.18873C10.6049 6.93391 11.2417 7.5 12 7.5C12.7583 7.5 13.3951 6.93391 13.4883 6.18873L13.5 6.092V2.5ZM13.5 8.00006C13.1218 8.28385 12.6614 8.46241 12.1637 8.4947L12 8.5C11.2305 8.5 10.5364 8.15058 10.0759 7.59655L10 7.499L9.92411 7.59655C9.49649 8.11101 8.86743 8.44904 8.16367 8.4947L8 8.5C7.23054 8.5 6.53641 8.15058 6.07589 7.59655L6 7.499L5.92411 7.59655C5.49649 8.11101 4.86743 8.44904 4.16367 8.4947L4 8.5C3.43968 8.5 2.91931 8.31471 2.5 8.00006V13.5H6V10.5H10V13.5H13.5V8.00006ZM9 11.5V13.5H7V11.5H9Z"
                    fill="#198055"></path>
            </svg>

            <div>
                <div class="gray">
                    Sourced from <span class="bold">{{ shippingData.seller.name }}</span>
                </div>
                <div class="gray normal">
                    Sold by and Ships from {{ shippingData.seller.fulfilledBy }}
                </div>
            </div>
        </div>
    </div>

    <div class="accordion-wrap">

        <!-- ========= DESCRIPTION ========= -->
        <div class="acc-row" (click)="toggleAccordion('desc')">
            <h5>Description</h5>
            <span class="plus">{{ activeAccordion === 'desc' ? '−' : '+' }}</span>
        </div>

        <div class="acc-content" *ngIf="activeAccordion === 'desc'">
            <h6 class="fw-bold mb-2">Features</h6>
            <div class="feature-list">
                <div class="feature-box" *ngFor="let f of features">
                    <img [src]="f.icon" />
                    {{ f.label }}
                </div>
            </div>

            <h6 class="fw-bold mt-3 mb-2">Fabric Elasticity</h6>
            <div class="elasticity-box">
                <img src="assets/images/aerro.png" />
                Medium Stretch
            </div>

            <table class="details-table">
                <tr *ngFor="let row of details">
                    <td>{{ row.key }}</td>
                    <td>{{ row.value }}</td>
                </tr>
            </table>
        </div>


        <!-- ========= SIZE & FIT ========= -->
        <div class="acc-row" (click)="toggleAccordion('sizefit')">
            <h5>Size & Fit</h5>
            <span class="plus">{{ activeAccordion === 'sizefit' ? '−' : '+' }}</span>
        </div>

        <div class="acc-content" *ngIf="activeAccordion === 'sizefit'">

            <div class="acc-content" *ngIf="activeAccordion === 'sizefit'">

                <!-- Country Switch -->
                <div class="d-flex align-items-center gap-2 mb-3">
                    <strong>Switch to:</strong>

                    <div class="dropdown">
                        <button class="dropdown-toggle" data-bs-toggle="dropdown">
                            {{ selectedCountry }} Size
                        </button>

                        <ul class="dropdown-menu">
                            <li *ngFor="let c of countries">
                                <a class="dropdown-item" (click)="changeCountry(c)">{{ c }}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- Model Info -->
                <div class="model-box">
                    <img src="assets/images/card_3.jpg" />
                    <div>
                        <strong>Model is Wearing: S (EU: 36)</strong><br />
                        Height: 66.9 · Bust: 34.3 · Waist: 26.4 · Hips: 42.1
                    </div>
                </div>

                <!-- Tabs -->
                <div class="tab-header">
                    <div class="tab-btn" [class.active]="activeTab === 'product'" (click)="activeTab = 'product'">
                        Product Measurements
                    </div>

                    <div class="tab-btn" [class.active]="activeTab === 'body'" (click)="activeTab = 'body'">
                        Body Measurements
                    </div>
                </div>

                <!-- Product Table -->
                <div *ngIf="activeTab === 'product'" class="table-scroll">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>{{ selectedCountry }}</th>
                                <th>Size</th>
                                <th>Length</th>
                                <th>Waist</th>
                                <th>Hip</th>
                                <th>Inseam</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr *ngFor="let r of productTable">
                                <td>{{ selectedCountry }}</td>
                                <td>{{ r.size }}</td>
                                <td>{{ r.length }}</td>
                                <td>{{ r.waist }}</td>
                                <td>{{ r.hip }}</td>
                                <td>{{ r.inseam }}</td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="small-note">
                        *Manually measured, may vary 0.39–0.79 IN
                    </div>
                </div>

                <!-- Body Table -->
                <div *ngIf="activeTab === 'body'" class="table-scroll">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>EU</th>
                                <th>Size</th>
                                <th>Length</th>
                                <th>Waist</th>
                                <th>Hip</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let r of bodyTable">
                                <td>{{ r.eu }}</td>
                                <td>{{ r.size }}</td>
                                <td>{{ r.length }}</td>
                                <td>{{ r.waist }}</td>
                                <td>{{ r.hip }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>



    </div>