<div class="dashboard-container" [class.loading-overlay]="isLoading">
    <!-- Header Section -->
    <div class="dashboard-header">
        <div>
            <h1>Dashboard</h1>
            <p class="subtitle">Welcome back! Here's your financial overview</p>
        </div>
        <button class="btn-logout" (click)="logout()" title="Logout">
            <span class="icon">üö™</span>
            <span class="text">Logout</span>
        </button>
    </div>

    <!-- Premium Loader -->
    <app-loader *ngIf="isLoading" message="Syncing your financial ecosystem..."></app-loader>

    <ng-container *ngIf="!isLoading">
        <!-- Main Balance Card -->
        <div class="balance-card-3d">
            <div class="balance-header">
                <div>
                    <p class="label">Available Balance</p>
                    <h2 class="balance-amount">{{ walletData.balance | currency: walletData.currency }}</h2>
                </div>
                <div class="wallet-badge">
                    <span class="icon">üí∞</span>
                </div>
            </div>
            <div class="wallet-info">
                <div class="id-row">
                    <span class="wallet-id">Wallet ID: {{ walletData.walletId }}</span>
                    <button class="copy-btn" (click)="copyWalletId()" title="Copy ID">
                        <i class="far fa-copy"></i>
                    </button>
                </div>
                <button class="btn-3d btn-sm" [routerLink]="['/transactions']">View Details</button>
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div *ngFor="let stat of stats" class="stat-card-3d" [style.--stat-color]="stat.color">
                <div class="stat-icon">{{ stat.icon }}</div>
                <div class="stat-content">
                    <p class="stat-label">{{ stat.label }}</p>
                    <h3 class="stat-value">
                        <ng-container *ngIf="stat.label.includes('Total')">
                            {{ stat.value | currency: 'USD' }}
                        </ng-container>
                        <ng-container *ngIf="!stat.label.includes('Total')">
                            {{ stat.value }}
                        </ng-container>
                    </h3>
                </div>
            </div>
        </div>

        <!-- Recent Transactions -->
        <div class="transactions-section">
            <div class="section-header">
                <h3>Recent Transactions</h3>
                <a [routerLink]="['/transactions']" class="view-all">View All ‚Üí</a>
            </div>

            <div class="transactions-table-3d">
                <div class="table-header">
                    <div class="col">Transaction ID</div>
                    <div class="col">Type</div>
                    <div class="col">Amount</div>
                    <div class="col">Status</div>
                    <div class="col">Date</div>
                </div>

                <div *ngFor="let txn of recentTransactions" class="table-row">
                    <div class="col">#{{ txn.id }}</div>
                    <div class="col">
                        <span class="type-badge" [class]="txn.type.toLowerCase()">{{ txn.type }}</span>
                    </div>
                    <div class="col" [class.negative]="txn.amount < 0" [class.positive]="txn.amount > 0">
                        {{ txn.amount | currency: 'USD' }}
                    </div>
                    <div class="col">
                        <span class="status-badge" [class]="txn.status.toLowerCase()">{{ txn.status }}</span>
                    </div>
                    <div class="col">{{ txn.date | date: 'MMM d, y' }}</div>
                </div>

                <div *ngIf="recentTransactions.length === 0" class="empty-state">
                    <p>No recent activity found.</p>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <h3>Quick Actions</h3>
            <div class="actions-grid">
                <button class="action-btn-3d" [routerLink]="['/transfer']">
                    <span class="icon">üí∏</span>
                    <span class="label">Transfer Money</span>
                </button>
                <button class="action-btn-3d" [routerLink]="['/deposit']">
                    <span class="icon">‚¨áÔ∏è</span>
                    <span class="label">Deposit Funds</span>
                </button>
                <button class="action-btn-3d" [routerLink]="['/withdraw']">
                    <span class="icon">‚¨ÜÔ∏è</span>
                    <span class="label">Withdraw</span>
                </button>
                <button class="action-btn-3d" [routerLink]="['/cards']">
                    <span class="icon">üí≥</span>
                    <span class="label">Apply for Card</span>
                </button>
            </div>
        </div>
    </ng-container>
</div>